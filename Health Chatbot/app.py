from flask import Flask, render_template, request, jsonify

app = Flask(__name__)

# ฟังก์ชันสำหรับตอบคำถามเกี่ยวกับการดูแลสุขภาพ
def health_chatbot(user_input):
    # คำถามเกี่ยวกับการรับประทานอาหาร
    if "กินอาหารอะไรดี" in user_input or "อาหารเพื่อสุขภาพ" in user_input:
        return "การกินอาหารที่มีประโยชน์ควรเน้นอาหารที่มีโปรตีนสูง เช่น เนื้อปลา ไก่ ไข่ และควรมีผัก ผลไม้ในทุกมื้อค่ะ"
    
    elif "กินอาหารเย็น" in user_input:
        return "อาหารเย็นควรเป็นอาหารที่ย่อยง่าย เช่น สลัดผัก ไข่ต้ม หรือปลาย่างค่ะ"

    elif "ควรดื่มน้ำมากแค่ไหน" in user_input or "ดื่มน้ำวันละเท่าไหร่" in user_input:
        return "การดื่มน้ำควรดื่มประมาณ 8 แก้วต่อวัน หรือมากกว่านั้นหากออกกำลังกายหรืออยู่ในที่อากาศร้อนค่ะ"

    # คำถามเกี่ยวกับการออกกำลังกาย
    elif "ควรออกกำลังกายอย่างไร" in user_input or "ออกกำลังกายแบบไหนดี" in user_input:
        return "การออกกำลังกายที่ดีควรทำอย่างน้อย 30 นาทีต่อวัน เช่น การวิ่ง การปั่นจักรยาน หรือโยคะค่ะ"
    
    elif "ออกกำลังกายช่วงไหนดี" in user_input:
        return "เวลาที่ดีที่สุดในการออกกำลังกายขึ้นอยู่กับร่างกายแต่ละคนค่ะ บางคนอาจรู้สึกดีตอนเช้า บางคนอาจออกกำลังกายได้ดีในช่วงเย็น ควรเลือกเวลาที่สะดวกและเหมาะสมกับตารางของคุณค่ะ"

    elif "ออกกำลังกายเพื่อลดน้ำหนัก" in user_input:
        return "การออกกำลังกายเพื่อลดน้ำหนักควรเป็นการคาร์ดิโอ เช่น วิ่ง ปั่นจักรยาน หรือการเดินเร็วควบคู่กับการคุมอาหารค่ะ"

    # คำถามเกี่ยวกับการนอนหลับ
    elif "ควรนอนกี่ชั่วโมง" in user_input:
        return "การนอนที่ดีควรนอนอย่างน้อย 7-8 ชั่วโมงต่อวันเพื่อให้ร่างกายได้ฟื้นฟูอย่างเต็มที่ค่ะ"
    
    elif "นอนยังไงให้หลับง่าย" in user_input:
        return "เพื่อการนอนที่หลับสบาย ควรหลีกเลี่ยงการใช้มือถือหรือดูหน้าจอก่อนนอน และทำให้ห้องนอนมืดและเงียบค่ะ"

    # คำถามเกี่ยวกับการลดน้ำหนัก
    elif "ลดน้ำหนัก" in user_input or "วิธีลดน้ำหนัก" in user_input:
        return "การลดน้ำหนักที่ได้ผลดีควรคุมอาหาร ลดการทานของหวานและไขมัน และออกกำลังกายอย่างสม่ำเสมอค่ะ"
    
    elif "อาหารเพื่อลดน้ำหนัก" in user_input:
        return "อาหารที่เหมาะสำหรับการลดน้ำหนักควรเป็นอาหารที่มีแคลอรี่ต่ำ เช่น สลัดผัก อกไก่ย่าง หรือปลานึ่งค่ะ"

    # คำถามเกี่ยวกับสุขภาพทั่วไป
    elif "ดูแลสุขภาพอย่างไร" in user_input:
        return "การดูแลสุขภาพที่ดีควรทานอาหารที่มีประโยชน์ ออกกำลังกายอย่างสม่ำเสมอ ดื่มน้ำเพียงพอ และนอนหลับอย่างเพียงพอค่ะ"
    
    elif "ป้องกันโรค" in user_input:
        return "การป้องกันโรคสามารถทำได้โดยการรักษาความสะอาด ล้างมือบ่อย ๆ ทานอาหารที่มีประโยชน์ และออกกำลังกายเป็นประจำค่ะ"
    
    elif "เครียดทำยังไง" in user_input or "จัดการความเครียด" in user_input:
        return "การจัดการความเครียดสามารถทำได้โดยการฝึกหายใจลึก ๆ การออกกำลังกาย หรือหากิจกรรมที่ทำให้ผ่อนคลาย เช่น ฟังเพลงหรืออ่านหนังสือค่ะ"

    # คำถามอื่น ๆ
    elif "สุขภาพจิต" in user_input:
        return "การดูแลสุขภาพจิตสำคัญไม่แพ้สุขภาพกาย ควรหมั่นทำกิจกรรมที่ทำให้จิตใจสงบ เช่น การนั่งสมาธิ หรือการออกกำลังกายที่ช่วยลดความเครียดค่ะ"

    elif "ดูแลผิว" in user_input:
        return "การดูแลผิวควรทำความสะอาดหน้าเป็นประจำ ใช้ครีมบำรุง และทาครีมกันแดดก่อนออกจากบ้านเสมอค่ะ"

    else:
        return "ขอบคุณสำหรับคำถามค่ะ สามารถถามเรื่องสุขภาพเพิ่มเติมได้นะคะ!"

# หน้าเว็บหลักที่มีอินเตอร์เฟสแชท
@app.route("/")
def index():
    return render_template("index.html")  # ชี้ไปที่ไฟล์ index.html

# API สำหรับรับข้อความและส่งตอบจากแชทบอท
@app.route("/get_response", methods=["POST"])
def get_response():
    user_input = request.json.get("message")
    response = health_chatbot(user_input)
    return jsonify({"response": response})

if __name__ == "__main__":
    app.run(debug=True)
